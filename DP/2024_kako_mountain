def solution(n, tops):
    MOD = 10007
    intrude = [0] * (n + 1)
    clean = [0] * (n + 1)

    clean[0] = 1
    intrude[0] = 0

    for i in range(1, n + 1):
        if tops[i-1] == 0:
            clean[i] = (2*clean[i-1] + intrude[i-1]) % MOD
            intrude[i] = clean[i-1] % MOD
        else:
            clean[i] = (3*clean[i-1] + 2*intrude[i-1]) % MOD
            intrude[i] = (2*clean[i-1] + intrude[i-1]) % MOD

    return (clean[n] + intrude[n]) % MOD
